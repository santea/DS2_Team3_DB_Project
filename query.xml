<query date="20180207">
    <SELECT_CONCERT_HALL>select ID, NAME, LOCATION, CAPACITY, COUNT(*) as ASSIGNED from CONCERT_HALL, CONCERT where CONCERT_HALL.ID = CONCERT.CONCERT_HALL_ID order by ID</SELECT_CONCERT_HALL>
    <SELECT_CONCERT>select * from CONCERT_HALL where ID='%s' and 1 = %s</SELECT_CONCERT>
    <SELECT_AUDIENCES>select 1</SELECT_AUDIENCES>
    <INSERT_CONCERT_HALL>select 1</INSERT_CONCERT_HALL>
    <DELETE_CONCERT_HALL>select 1</DELETE_CONCERT_HALL>
    <INSERT_CONCERT>select 1</INSERT_CONCERT>
    <DELETE_CONCERT>select 1</DELETE_CONCERT>
    <INSERT_AUDIENCE>select 1</INSERT_AUDIENCE>
    <UPDATE_PCONCERT>select 1</UPDATE_PCONCERT>
    <SELECT_PERFORMANCE></SELECT_PERFORMANCE>
    <DROP_TEST>
        drop table CONCERT_HALL;
        drop table CONCERT;
        drop table RESERVATION;
        drop table AUDIENCE;
    </DROP_TEST>
    <CREATE_TABLES>
        create table CONCERT_HALL (
        ID INT UNSIGNED AUTO_INCREMENT,
        NAME VARCHAR(200) NOT NULL,
        LOCATION VARCHAR(200) NOT NULL,
        CAPACITY int UNSIGNED CHECK (PERSONNEL > 0),
        PRIMARY KEY(ID)
        );

        create table CONCERT (
        ID INT UNSIGNED AUTO_INCREMENT,
        CONCERT_HALL_ID INT UNSIGNED REFERENCES CONCERT_HALL(ID),
        NAME VARCHAR(200) NOT NULL,
        TYPE VARCHAR(200) NOT NULL,
        PRICE INT UNSIGNED CHECK (PRICE >= 0),
        PRIMARY KEY(ID)
        );


        create table RESERVATION (
        CONCERT_ID int UNSIGNED REFERENCES CONSERT(ID) ,
        SEAT_NO int UNSIGNED CHECK (SEAT_NO > 0),
        AUDIENCE_ID int UNSIGNED REFERENCES AUDIENCE(ID),
        RESERVATION_FLAG boolean DEFAULT False,
        PRIMARY KEY(CONCERT_ID, SEAT_NO)
        );


        create table AUDIENCE (
        ID INT UNSIGNED AUTO_INCREMENT,
        NAME VARCHAR(200) NOT NULL,
        GENDER VARCHAR(1) NOT NULL,
        AGE INT UNSIGNED CHECK (AGE > 0),
        PRIMARY KEY(ID)
        );
    </CREATE_TABLES>
</query>